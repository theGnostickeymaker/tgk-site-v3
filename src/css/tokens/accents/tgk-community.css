@layer tokens {

  /* ===================================================
     TGK Community Accent Theme: Aquatic Glow / Coastal Calm
     Version: 2.2 (readability rebalance)
     Notes:
     - Dark mode card gradients no longer run into bright teal
     - Text tokens shifted to cleaner high contrast
     - Adds community readability overrides for long-form text
     =================================================== */


  /* ===================================================
     LIGHT MODE: Coastal Calm
     =================================================== */
  html[data-theme="light"] body.community {

    /* Core tokens */
    --bg-opacity: 0.32 !important;
    --text-primary: #1a1a1a !important;
    --text-secondary: #4a4a4a !important;
    --text-muted: #666 !important;

    /* Accents */
    --text-accent: #276b67 !important;
    --highlight: #e8fbfa !important;
    --shadow-glow: rgba(107, 210, 204, 0.15) !important;
    --glyph-color: #3aa9a3 !important;
    --strong-text: #1f4e4a !important;
    --cite-color: #4d9894 !important;
    --accent-page: #57b1ac !important;
    --section-border: #cfeeed !important;

    /* Page + Card Gradients */
    --card-gradient: linear-gradient(
      145deg,
      #f8fefe 0%,
      #eaf9f8 30%,
      #d9f3f1 60%,
      #c4ece9 85%,
      #9adfdc 100%
    ) !important;

    --bg-primary: #f8fefe !important;
    --bg-gradient: var(--bg-primary) !important;
    background: var(--bg-primary) !important;

    /* Cards */
    --card-bg: #ffffff !important;
    --card-border: rgba(87, 177, 172, 0.25) !important;
    --card-shadow: 0 0 18px rgba(107, 210, 204, 0.12) !important;

    /* Buttons */
    --btn-bg: #f8fefe !important;
    --btn-border: var(--accent-page) !important;
    --btn-text: var(--text-accent) !important;
    --btn-hover-bg: #c4ece9 !important;
    --btn-hover-text: #123030 !important;

    /* Form fields */
    --input-bg: #ffffff !important;
    --input-border: var(--section-border) !important;
    --input-text: var(--text-primary) !important;
    --input-focus-border: var(--accent-page) !important;
    --input-focus-shadow: 0 0 8px rgba(107, 210, 204, 0.35) !important;

    /* Badge tokens */
    --badge-bg: rgba(200, 235, 235, 0.55) !important;
    --badge-text: #1f4e4a !important;
    --badge-border: rgba(87, 177, 172, 0.45) !important;
    --badge-shadow: 0 1px 4px rgba(107, 210, 204, 0.12) !important;

    /* Footer opacity */
    --footer-opacity: 0.96 !important;

    /* Overlays */
    --overlay-bg-gradient: linear-gradient(
      to right,
      rgba(255, 255, 255, 0.85),
      rgba(224, 248, 248, 0.88),
      rgba(200, 235, 235, 0.85)
    ) !important;

    /* Shadows */
    --page-box-shadow: 0 0 20px rgba(107, 210, 204, 0.12) !important;
    --shadow-soft: 0 2px 8px rgba(10, 40, 40, 0.08) !important;
  }


  /* Component overrides: light */
  html[data-theme="light"] body.community .site-header,
  html[data-theme="light"] body.community .site-footer {
    background: linear-gradient(to bottom, #ffffff, #eaf9f8) !important;
    color: var(--text-accent) !important;
    border-bottom: 1px solid var(--highlight) !important;
  }

  html[data-theme="light"] body.community .section-block {
    background: linear-gradient(145deg, #eaf9f8 0%, #d9f3f1 60%, #c4ece9 100%) !important;
    border-color: var(--section-border) !important;
    box-shadow: var(--page-box-shadow) !important;
  }

  html[data-theme="light"] body.community .image-block {
    border: 1px solid var(--section-border) !important;
    box-shadow: 0 0 16px rgba(107, 210, 204, 0.12) !important;
  }


  /* ===================================================
     DARK MODE: Aquatic Glow (readability rebalance)
     =================================================== */
  html[data-theme="dark"] body.community {

    /* Core */
    --bg-opacity: 0.14 !important;
    --text-primary: #f6fcfc !important;
    --text-secondary: #cfd9d9 !important;
    --text-muted: #a2b0b0 !important;

    /* Accents */
    --text-accent: #86d6d0 !important;
    --highlight: #bdebe6 !important;
    --glyph-color: #e8ffff !important;
    --shadow-glow: rgba(136, 216, 210, 0.20) !important;
    --strong-text: #e8ffff !important;
    --cite-color: #9fe7e1 !important;
    --accent-page: #6fcac5 !important;
    --section-border: rgba(181, 237, 231, 0.55) !important;

    /* Card + page gradient (kept dark; no bright teal stop) */
    --card-gradient: linear-gradient(
      145deg,
      #071010 0%,
      #0a1617 40%,
      #0d2021 70%,
      #103033 100%
    ) !important;

    --bg-primary: #050b0b !important;
    --bg-gradient: var(--bg-primary) !important;
    background: var(--bg-primary) !important;

    /* Cards */
    --card-bg: #071111 !important;
    --card-border: rgba(136, 216, 210, 0.22) !important;
    --card-shadow: 0 0 22px rgba(136, 216, 210, 0.16) !important;

    /* Buttons */
    --btn-bg: #071111 !important;
    --btn-border: rgba(111, 202, 197, 0.65) !important;
    --btn-text: var(--text-primary) !important;
    --btn-hover-bg: #123030 !important;
    --btn-hover-text: #ffffff !important;

    /* Form fields */
    --input-bg: #050b0b !important;
    --input-border: rgba(181, 237, 231, 0.35) !important;
    --input-text: var(--text-primary) !important;
    --input-focus-border: var(--accent-page) !important;
    --input-focus-shadow: 0 0 10px rgba(136, 216, 210, 0.28) !important;

    /* Badge tokens */
    --badge-bg: rgba(136, 216, 210, 0.16) !important;
    --badge-text: #e8ffff !important;
    --badge-border: rgba(136, 216, 210, 0.22) !important;
    --badge-shadow: 0 1px 4px rgba(136, 216, 210, 0.14) !important;

    /* Footer */
    --footer-opacity: 0.88 !important;

    /* Overlays */
    --overlay-bg-gradient: linear-gradient(
      to right,
      rgba(5, 15, 15, 0.94),
      rgba(9, 24, 24, 0.90),
      rgba(18, 48, 48, 0.86)
    ) !important;

    /* Shadows */
    --page-box-shadow: 0 0 22px rgba(136, 216, 210, 0.18) !important;
    --shadow-soft: 0 2px 10px rgba(0, 0, 0, 0.34) !important;
  }


  /* Component overrides: dark */
  html[data-theme="dark"] body.community .site-header,
  html[data-theme="dark"] body.community .site-footer {
    background: linear-gradient(to bottom, #050f0f, #123030) !important;
    color: var(--text-accent) !important;
    border-bottom: 1px solid rgba(189, 235, 230, 0.45) !important;
  }

  html[data-theme="dark"] body.community .section-block {
    background: linear-gradient(145deg, #0a1617 0%, #0d2021 60%, #103033 100%) !important;
    border-color: var(--section-border) !important;
    box-shadow: var(--page-box-shadow) !important;
  }


  /* ===================================================
     TGK Community: readability overrides (both themes)
     These are intentionally scoped to body.community only.
     =================================================== */

  /* Long-form reading comfort */
  body.community .thread-card,
  body.community .comment-card,
  body.community .reply-card,
  body.community .post-card {
    color: var(--text-primary) !important;
  }

  body.community .thread-card p,
  body.community .comment-card p,
  body.community .reply-card p,
  body.community .post-card p,
  body.community .thread-card li,
  body.community .comment-card li,
  body.community .reply-card li,
  body.community .post-card li {
    line-height: 1.65 !important;
    font-style: normal !important;
  }

  /* Steel Man box: calm background, solid border, no italics wall-of-text */
  body.community .steelman-box,
  body.community .steelman-summary,
  body.community blockquote.steelman {
    background: rgba(255, 255, 255, 0.04) !important;
    border: 1px solid rgba(255, 255, 255, 0.12) !important;
    border-radius: 12px !important;
    box-shadow: none !important;
    font-style: normal !important;
  }

  /* If your Steel Man title/label has a class, allow it to stay italic */
  body.community .steelman-label,
  body.community .steelman-title {
    font-style: italic !important;
    opacity: 0.92 !important;
  }


  /* ===================================================
     Global overrides (remove default overlays)
     =================================================== */
  html[data-theme="light"] body::before,
  html[data-theme="dark"] body::before {
    --overlay-bg-gradient: none !important;
    --overlay-img: none !important;
    opacity: 0 !important;
  }


  /* ============================================================
     TGK Community: Rebalanced Vote Colours
     Subtle, readable, symbolic, non-intrusive
     ============================================================ */

  /* LIGHT MODE */
  html[data-theme="light"] body.community {
    --vote-insight: #3eaaa2 !important;
    --vote-insight-bg: rgba(62, 170, 162, 0.08) !important;

    --vote-agree: #a58535 !important;
    --vote-agree-bg: rgba(165, 133, 53, 0.10) !important;

    --vote-challenge: #b25563 !important;
    --vote-challenge-bg: rgba(178, 85, 99, 0.10) !important;
  }

  /* DARK MODE */
  html[data-theme="dark"] body.community {
    --vote-insight: #7edde0 !important;
    --vote-insight-bg: rgba(126, 221, 224, 0.16) !important;

    --vote-agree: #d7bb80 !important;
    --vote-agree-bg: rgba(215, 187, 128, 0.18) !important;

    --vote-challenge: #ff8aa9 !important;
    --vote-challenge-bg: rgba(255, 138, 169, 0.18) !important;
  }

  /* Vote button text colour alignment */
  html[data-theme="light"] body.community .vote-btn,
  html[data-theme="dark"] body.community .vote-btn {
    color: var(--text-primary) !important;
  }

  html[data-theme="light"] body.community .vote-btn.active {
    color: var(--text-accent) !important;
  }

  html[data-theme="dark"] body.community .vote-btn.active {
    color: var(--glyph-color) !important;
  }

}

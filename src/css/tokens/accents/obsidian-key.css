@layer tokens {
  /* ===================================================
Obsidian Key
=================================================== */

html[data-theme="dark"] body.obsidian {
  --bg-opacity: 0.16; /* NEW */
  --text-accent: #de6433 !important;
  --highlight: #f8a272 !important;
  --shadow-glow: rgba(255, 120, 80, 0.25) !important;
  --glyph-color: #ffa07a !important;
  --strong-text: #ffb190 !important;
  --scroll-box-shadow: 0 0 25px rgba(255, 120, 80, 0.25) !important;
  --cite-color: #ffb190 !important;
  --accent-scroll: #de6433 !important;
  --section-border: #f8a272 !important;
  --card-gradient: linear-gradient(145deg, #120704 0%, #2a100a 25%, #3e140a 50%, #702b1a 75%, #de6433 100%) !important;
}

html[data-theme="dark"] body.obsidian {
  --bg-gradient: var(--card-gradient) !important;
  background: var(--bg-gradient) !important;
}

html[data-theme="dark"] body.obsidian .site-header,
html[data-theme="dark"] body.obsidian .site-footer {
  background: linear-gradient(to bottom, #120704, #2a100a) !important;
  color: var(--text-accent)!important;
  border-bottom: 1px solid var(--highlight)!important;
}

html[data-theme="dark"] body.obsidian .scroll-title {
  background: linear-gradient(to right, #2a100a 0%, #702b1a 60%, #de6433 100%) !important;
  color: #de6433 !important;
  text-shadow: 0 1px 6px rgba(255, 120, 80, 0.25) !important;
}

html[data-theme="dark"] body.obsidian .section-block {
  background: linear-gradient(145deg, #2a100a 0%, #3e140a 50%, #702b1a 100%) !important;
  border-color: #f8a272 !important;
  box-shadow: 0 0 25px rgba(255, 120, 80, 0.25) !important;
}

html[data-theme="dark"] body.obsidian .image-block {
  border: 1px solid #f8a272 !important;
  box-shadow: 0 0 20px rgba(255, 120, 80, 0.2) !important;
}

/* Dark Theme */
html[data-theme="dark"] body.obsidian .quiz-question,
html[data-theme="dark"] body.obsidian .quiz-prompt {
  background: linear-gradient(to right, #3e140a, #702b1a) !important;
  color: #ffb190 !important;
  border-left: 4px solid #ffa07a !important;
  box-shadow: 0 0 14px rgba(255, 120, 80, 0.2) !important;
}

html[data-theme="dark"] body.obsidian .quiz-options {
  background: #2a100a !important;
  border: 1px solid #de6433 !important;
}

html[data-theme="dark"] body.obsidian .quiz-options button,
html[data-theme="dark"] body.obsidian .quiz-button {
  background: #2a100a !important;
  color: #ffb190 !important;
  border: 2px solid #ffa07a !important;
  box-shadow: 0 0 6px rgba(255, 120, 80, 0.12) inset !important;
}

html[data-theme="dark"] body.obsidian .quiz-options button:hover,
html[data-theme="dark"] body.obsidian .quiz-button:hover {
  background: #3e140a !important;
  color: #fff1ec !important;
  border-color: #de6433 !important;
  box-shadow: 0 0 14px rgba(255, 120, 80, 0.3) !important;
}

html[data-theme="dark"] body.obsidian {
  --overlay-bg-gradient: linear-gradient(
    to right,
    rgba(42, 16, 10, 0.35),
    rgba(112, 43, 26, 0.35)
  );
}

html[data-theme="light"] body.obsidian {
  --bg-opacity: 0.30; /* NEW */
  --text-accent: #c3653f !important;
  --highlight: #ffc3a1 !important;
  --shadow-glow: rgba(255, 180, 140, 0.2) !important;
  --glyph-color: #ff8850 !important;
  --strong-text: #e2785e !important;
  --scroll-box-shadow: 0 0 25px rgba(255, 180, 140, 0.2) !important;
  --cite-color: #e2785e !important;
  --accent-scroll: #c3653f !important;
  --section-border: #ffc3a1 !important;
  --card-gradient: linear-gradient(145deg, #fff5ef 0%, #ffe2d0 30%, #ffd1b4 60%, #f8a272 85%, #c3653f 100%) !important;
}

html[data-theme="light"] body.obsidian {
  --bg-gradient: var(--card-gradient) !important;
  background: var(--bg-gradient) !important;
}

html[data-theme="light"] body.obsidian .site-header,
html[data-theme="light"] body.obsidian .site-footer {
  background: linear-gradient(to bottom, #fff5ef, #ffe2d0)!important;
  color: var(--text-accent)!important;
  border-bottom: 1px solid var(--highlight)!important;
}

html[data-theme="light"] body.obsidian .scroll-title {
  background: linear-gradient(to right, #ffe2d0 0%, #f8a272 100%) !important;
  color: #c3653f !important;
  text-shadow: 0 1px 4px rgba(255, 180, 140, 0.2) !important;
}

html[data-theme="light"] body.obsidian .section-block {
  background: linear-gradient(145deg, #ffe2d0 0%, #ffd1b4 60%, #f8a272 100%) !important;
  border-color: #ffc3a1 !important;
  box-shadow: 0 0 22px rgba(255, 180, 140, 0.18) !important;
}

html[data-theme="light"] body.obsidian .image-block {
  background: linear-gradient(to right, #ffd1b4 0%, #f8a272 60%, #c3653f 100%) !important;
  border: 1px solid #ffc3a1 !important;
  box-shadow: 0 0 16px rgba(255, 180, 140, 0.15) !important;
}

/* Light Theme */
html[data-theme="light"] body.obsidian .quiz-question,
html[data-theme="light"] body.obsidian .quiz-prompt {
  background: linear-gradient(to right, #ffe2d0, #ffc3a1) !important;
  color: #c3653f !important;
  border-left: 4px solid #ff8850 !important;
  box-shadow: 0 0 12px rgba(255, 180, 140, 0.15) !important;
}

html[data-theme="light"] body.obsidian .quiz-options {
  background: #fff5ef !important;
  border: 1px solid #ffc3a1 !important;
}

/* === Obsidian === */
html[data-theme="light"] body.obsidian .quiz-options button,
html[data-theme="light"] body.obsidian .quiz-button {
  background: #ffe2d0 !important;
  color: #c3653f !important;
  border: 2px solid #ff8850 !important;
  box-shadow: 0 0 6px rgba(255, 180, 140, 0.15) inset !important;
}

html[data-theme="light"] body.obsidian .quiz-options button:hover,
html[data-theme="light"] body.obsidian .quiz-button:hover {
  background: #ffc3a1 !important;
  color: #5e2f1b !important;
  border-color: #c3653f !important;
  box-shadow: 0 0 12px rgba(255, 120, 80, 0.3) !important;
}

html[data-theme="light"] body.obsidian {
  --overlay-bg-gradient: linear-gradient(
    to right,
    rgba(255, 226, 208, 0.35),
    rgba(248, 162, 114, 0.35)
  );
}

/* âœ¦ Obsidian Key */
html[data-theme="light"] body.obsidian { --footer-opacity: 0.92; }
html[data-theme="dark"]  body.obsidian { --footer-opacity: 0.80; }
}

html[data-theme="light"] body::before,
html[data-theme="dark"] body::before {
  --overlay-bg-gradient: none !important;
  --overlay-img: none !important;
  opacity: 0 !important;
}
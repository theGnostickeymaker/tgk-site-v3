{# ===========================================================
   🜂 TGK — Series Navigation Partial (v2.3)
   Compatible with YAML literal block arrays.
   =========================================================== #}

{% set navData = seriesNav or page.seriesNav or collections.currentPage and collections.currentPage.data and collections.currentPage.data.seriesNav %}
{% if navData and navData is string %}
  {% set seriesNav = navData | safe | fromJson %}
{% else %}
  {% set seriesNav = navData %}
{% endif %}

{% if seriesNav and seriesNav.length %}
<section id="series" class="section-block series-navigation">
  <h2 class="section-heading">🜂 Explore the Next Gates</h2>
  <ul class="list-emoji">
    {% for item in seriesNav %}
      <li>
        {% if page.url == item.url %}
          <span class="active-scroll">{{ item.title }} — {{ item.desc }}</span>
        {% else %}
          <a href="{{ item.url }}">{{ item.title }}</a> — {{ item.desc }}
        {% endif %}
      </li>
    {% endfor %}
  </ul>
</section>
{% else %}
<section id="series" class="section-block series-navigation-empty">
  <p class="series-map-empty">⚠️ No <code>seriesNav</code> found — ensure it’s exported or injected.</p>
</section>
{% endif %}


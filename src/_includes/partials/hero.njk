{# =========================================================
   ğŸŒ„ TGK â€” Hero Header Partial (v2.4)
   Purpose:
   Renders the main hero banner (title, glyph, and tagline)
   for home, pillar landing pages, and page-level intros.

   âœ… Data Sources:
   â€¢ pillarUrl, pillarName, pillarGlyphs, pillarTagline
   â€¢ heroTitle, heroTagline
   â€¢ landing (boolean)
   â€¢ page.url (Eleventy built-in)

   ğŸ§­ behavior:
   â€¢ Shows global hero on home (âœ¶ Unlock the Hidden Truths)
   â€¢ Shows pillar hero on landing pages (/pillars/.../)
   â€¢ Shows custom hero for pages with heroTitle/tagline
   â€¢ Automatically switches glyphs based on pillar context

   âœ¨ Accessibility:
   â€¢ Uses <h1> for main page title (dynamic context)
   â€¢ Glyph animation is marked aria-hidden for screen readers

   âš™ï¸ Styling:
   Controlled via pillar accent theme (e.g. gold.css, obsidian.css)
   ========================================================= #}

{# --- Resolve pillar values safely --- #}
{% set P_url     = pillarUrl     or false %}
{% set P_name    = pillarName    or false %}
{% set P_glyphs  = pillarGlyphs  or false %}
{% set P_tagline = pillarTagline or false %}

{# --- Determine context --- #}
{% set isHome    = page.url == '/' %}
{% set isLanding = (landing) or (P_url and page.url and page.url == P_url) %}

{# --- Choose glyph: âœ¶ on home, otherwise pillar glyph(s) --- #}
{% set glyphHTML = 'âœ¶' %}
{% if not isHome and P_glyphs %}
  {% set glyphHTML = P_glyphs %}
{% endif %}

{# --- Render hero block only when relevant --- #}
{% if isHome or isLanding or heroTitle or heroTagline %}
<header class="page-title">
  <div class="site-brand">
    <a href="/" class="header-link">The Gnostic Key</a>
  </div>

  <div class="glyph-page" aria-hidden="true">
    {{ glyphHTML | safe }}
  </div>

  {% if isHome %}
    {# ğŸ  Home Page Hero #}
    <h1 class="main-logo-page">Unlock the Hidden Truths</h1>

  {% elseif isLanding and P_name %}
    {# ğŸ› Pillar Landing Hero #}
    <h1 class="page-title">{{ P_name }}</h1>
    {% if P_tagline %}
      <div class="main-tagline">{{ P_tagline }}</div>
    {% endif %}

  {% else %}
    {# ğŸ“œ page or Subpage Hero #}
    {% if heroTitle %}
      <h1 class="page-title">{{ heroTitle }}</h1>
    {% endif %}
    {% if heroTagline %}
      <div class="main-tagline">{{ heroTagline }}</div>
    {% endif %}
  {% endif %}
</header>
{% endif %}

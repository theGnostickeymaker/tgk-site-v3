{# --- Resolve pillar values safely (no object literals / no ternary) --- #}
{% set P_url     = pillarUrl     or false %}
{% set P_name    = pillarName    or false %}
{% set P_glyphs  = pillarGlyphs  or false %}
{% set P_tagline = pillarTagline or false %}

{% set isHome    = page.url == '/' %}
{% set isLanding = (landing) or (P_url and page.url and page.url == P_url) %}

{# glyph: ✶ on home; otherwise use pillar glyphs if provided #}
{% set glyphHTML = '✶' %}
{% if not isHome and P_glyphs %}{% set glyphHTML = P_glyphs %}{% endif %}

{# Render hero only when needed #}
{% if isHome or isLanding or heroTitle or heroTagline %}
<header class="hero-header">
  <div class="site-brand">
    <a href="/" class="header-link">The Gnostic Key</a>
  </div>

  <div class="glyph-scroll" aria-hidden="true">{{ glyphHTML | safe }}</div>

  {% if isHome %}
    <h1 class="main-logo-scroll">Unlock the Hidden Truths</h1>

  {% elseif isLanding and P_name %}
    <h1 class="pillar-title">{{ P_name }}</h1>
    {% if P_tagline %}
      <div class="main-tagline">{{ P_tagline }}</div>
    {% endif %}

  {% else %}
    {% if heroTitle %}
      <h1 class="pillar-title">{{ heroTitle }}</h1>
    {% endif %}
    {% if heroTagline %}
      <div class="main-tagline">{{ heroTagline }}</div>
    {% endif %}
  {% endif %}
</header>
{% endif %}

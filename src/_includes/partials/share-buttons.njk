{# ===========================================================
   🜂 TGK — Social Share Section (v2.2)
   Purpose:
   Enables readers to share a scroll directly to Telegram, X (Twitter),
   or join The Gnostic Key’s official channel.

   ✅ Expected Data:
     - title        → Scroll title (from front matter)
     - permalink    → Canonical permalink (Eleventy)
     - page.url     → Fallback for current page URL
     - siteBase     → TGK site root (defaults to https://thegnostickey.com)

   💡 Behaviour:
     - Dynamically encodes scroll title and URL
     - Adds default hashtag #TheGnosticKey
     - Consistent with TGK’s “btn-row” and “btn-outline” styling
     - Can be appended at the end of any scroll layout
   =========================================================== #}

{% set siteBase = "https://thegnostickey.com" %}
{% set shareTitle = title or page.fileSlug or "The Gnostic Key" %}
{% set relativeUrl = permalink or page.url or "/" %}
{% set shareUrl = siteBase + relativeUrl %}

<section id="share" class="section-block share-section">
  <h2 class="section-heading">📤 Share This Scroll</h2>
  <p class="section-subtitle">Spread the light — every share is a spark of remembrance.</p>

  <div class="btn-row">

    {# --- Telegram Direct Share --- #}
    <div class="btn-wrap">
      <a href="https://t.me/share/url?url={{ shareUrl | urlencode }}&text={{ shareTitle | urlencode }}%20%23TheGnosticKey"
         target="_blank"
         rel="noopener noreferrer"
         class="btn btn-outline"
         aria-label="Share this scroll on Telegram">
        🔗 <strong>Share on Telegram</strong>
      </a>
    </div>

    {# --- Share on X (formerly Twitter) --- #}
    <div class="btn-wrap">
      <a href="https://x.com/intent/tweet?url={{ shareUrl | urlencode }}&text={{ shareTitle | urlencode }}%20%23TheGnosticKey"
         target="_blank"
         rel="noopener noreferrer"
         class="btn btn-outline"
         aria-label="Share this scroll on X (formerly Twitter)">
        📤 <strong>Share on X</strong>
      </a>
    </div>

    {# --- Official TGK Telegram Channel --- #}
    <div class="btn-wrap">
      <a href="https://t.me/TheGnosticKey"
         target="_blank"
         rel="noopener noreferrer"
         class="btn btn-outline"
         aria-label="Join The Gnostic Key Telegram channel">
        💬 <strong>Join Our Channel</strong>
      </a>
    </div>
  </div>
</section>

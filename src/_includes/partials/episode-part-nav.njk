{% if episodeParts and episodeParts.length %}
  {% set currentIndex = -1 %}
  {% for part in episodeParts %}
    {% if page.url == part.url %}
      {% set currentIndex = loop.index0 %}
    {% endif %}
  {% endfor %}

  {% if currentIndex > -1 %}
    <nav class="episode-part-nav {{ __ac }}">
      <div class="episode-nav-links">
        {% if currentIndex > 0 %}
          {% set prevPart = episodeParts[currentIndex - 1] %}
          <a href="{{ prevPart.url }}" class="episode-prev">← {{ prevPart.title }}</a>
        {% endif %}

        {% if currentIndex < (episodeParts.length - 1) %}
          {% set nextPart = episodeParts[currentIndex + 1] %}
          <a href="{{ nextPart.url }}" class="episode-next">{{ nextPart.title }} →</a>
        {% endif %}
      </div>
    </nav>
  {% endif %}
{% endif %}
